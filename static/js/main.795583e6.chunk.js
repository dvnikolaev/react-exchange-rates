(this["webpackJsonpreact-redux-exchange-rates"]=this["webpackJsonpreact-redux-exchange-rates"]||[]).push([[0],{100:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),s=a(1),u=a(7),i=a(63),l=a(64),b=a(2),d={baseRate:"USD",secondaryRates:["RUB","EUR","CHF","JPY"],historyWorths:[],rates:[]},f=Object(u.combineReducers)({rates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RATES":return Object(b.a)(Object(b.a)({},e),{},{rates:t.payload});case"FETC_HISTORY_WORTHS":return Object(b.a)(Object(b.a)({},e),{},{historyWorths:t.payload});case"SELECT_BASE_RATE":return Object(b.a)(Object(b.a)({},e),{},{baseRate:t.payload});case"SET_SECONDARY_RATES":return Object(b.a)(Object(b.a)({},e),{},{secondaryRates:t.payload});default:return e}}}),m=Object(u.createStore)(f,Object(i.composeWithDevTools)(Object(u.applyMiddleware)(l.a))),h=(a(76),a(77),function(){return r.a.createElement("header",{className:"page-header"},r.a.createElement("h1",{className:"page__header"},"Exchange Rates"))}),p=(a(78),a(66)),v=a(3),E=a.n(v),g=a(9),O=a(10),y=a.n(O),R=function(e){return new Date((new Date).setMonth(e)).toLocaleString("ru",{month:"long"})},j=function(){var e=Object(g.a)(E.a.mark((function e(){var t,a,n,r,c,o,s,u,i,l,b,d=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:"USD",a=function(e){return new Date((new Date).getFullYear(),(new Date).getMonth()-e+1,1).toISOString().substr(0,10)},n=function(e){return"https://api.exchangerate.host/".concat(a(e),"?base=").concat(t)},e.next=5,y.a.get(n(1));case 5:return r=e.sent,c=r.data.rates,e.next=9,y.a.get(n(2));case 9:return o=e.sent,s=o.data.rates,e.next=13,y.a.get(n(3));case 13:return u=e.sent,i=u.data.rates,e.next=17,y.a.get(n(4));case 17:return l=e.sent,b=l.data.rates,e.abrupt("return",[c,s,i,b]);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n,r,c,o,s,u,i,l,b,d,f,m;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.join(","),r=new Date((new Date).getFullYear(),(new Date).getMonth(),2).toISOString().substr(0,10),c=new Date((new Date).getFullYear(),(new Date).getMonth()+1,1).toISOString().substr(0,10),e.next=5,y.a.get("https://api.exchangerate.host/timeseries?start_date=".concat(r,"&end_date=").concat(c,"&base=").concat(t,"&symbols=").concat(n));case 5:o=e.sent,s=o.data.rates,u=Object.values(s),i=[],l=[],b=[],d=[],f=0;case 13:if(!(f<u.length)){e.next=34;break}e.t0=E.a.keys(u[f]);case 15:if((e.t1=e.t0()).done){e.next=31;break}m=e.t1.value,e.t2=m,e.next=e.t2===a[0]?20:e.t2===a[1]?22:e.t2===a[2]?24:e.t2===a[3]?26:28;break;case 20:return i.push(u[f][m]),e.abrupt("break",29);case 22:return l.push(u[f][m]),e.abrupt("break",29);case 24:return b.push(u[f][m]),e.abrupt("break",29);case 26:return d.push(u[f][m]),e.abrupt("break",29);case 28:return e.abrupt("break",29);case 29:e.next=15;break;case 31:f++,e.next=13;break;case 34:return e.abrupt("return",[i,l,b,d]);case 35:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=(a(96),a(97),function(e){var t=e.className,a=e.children,n=t||"";return r.a.createElement("article",{className:"card ".concat(n)},a)}),C=Object(s.b)((function(e){return{baseRate:e.rates.baseRate}}))((function(e){var t=e.baseRate;return r.a.createElement("header",{className:"card-header"},r.a.createElement("span",{className:"base__subheader"},"\u041a\u0443\u0440\u0441"),r.a.createElement("h2",{className:"base__name"},t))})),k=function(){return r.a.createElement(S,{className:"card--dark card__base"},r.a.createElement(C,null),r.a.createElement("span",{className:"base__value"},"1"))},w=a(8),x=(a(98),function(e){var t=e.name,a=e.index,n=e.activeMonth,c=e.setActiveMonth;return r.a.createElement("li",{className:"months-list__item"},r.a.createElement("button",{className:"months-list__button ".concat(a===n?"months-list__button--active":""),onClick:function(){return c(a)}},t))}),N=function(e){var t=e.activeMonth,a=e.setActiveMonth,n=[R((new Date).getMonth()-4),R((new Date).getMonth()-3),R((new Date).getMonth()-2),R((new Date).getMonth()-1)].map((function(e,n){return r.a.createElement(x,{name:e,key:e,index:n,activeMonth:t,setActiveMonth:function(e){return a(e)}})}));return r.a.createElement("ul",{className:"months-list"},n)},B=function(e){var t=e.name,a=e.value;return r.a.createElement("li",{className:"history-list__item"},r.a.createElement("span",null,t),r.a.createElement("span",null,a))},H=Object(s.b)((function(e){return{secondaryRates:e.rates.secondaryRates,historyWorths:e.rates.historyWorths}}))((function(e){var t,a=e.activeMonth,n=e.secondaryRates,c=e.historyWorths;c.length&&(t=n.map((function(e){return{rate:e,value:c[a][e]}})));return r.a.createElement("ul",{className:"history-list"},t?t.map((function(e,t){return r.a.createElement(B,{key:t,name:e.rate,value:e.value.toFixed(2)})})):null)})),D=Object(s.b)((function(e){return{baseRate:e.rates.baseRate}}),{fetchHistoryWorths:function(e){return function(){var t=Object(g.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e);case 2:n=t.sent,a({type:"FETC_HISTORY_WORTHS",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.baseRate,a=e.fetchHistoryWorths,c=Object(n.useState)(3),o=Object(w.a)(c,2),s=o[0],u=o[1];return Object(n.useEffect)((function(){a(t)}),[t]),r.a.createElement(S,{className:"history-worths card--light"},r.a.createElement("h2",{className:"history__header"},"\u041a\u0443\u0440\u0441 ",t," \u0437\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043c\u0435\u0441\u044f\u0446\u044b"),r.a.createElement(N,{activeMonth:s,setActiveMonth:u}),r.a.createElement(H,{activeMonth:s}))})),T=(a(99),function(e){var t=e.searchValue,a=e.setSearchValue;return r.a.createElement("input",{value:t,onChange:function(e){return a(e.target.value)},className:"rates__search",placeholder:"\u041f\u043e\u0438\u0441\u043a..."})}),M=Object(s.b)((function(e){return{baseRate:e.rates.baseRate}}),{selectBaseRate:function(e){return{type:"SELECT_BASE_RATE",payload:e}}})((function(e){var t=e.baseRate,a=e.name,n=e.value,c=e.selectBaseRate,o=a===t?"rates-list__button--active":"";return r.a.createElement("li",{className:"rates-list__item"},r.a.createElement("button",{className:"rates-list__button ".concat(o),onClick:function(){return c(a)}},r.a.createElement("span",null,a),r.a.createElement("span",null,n)))})),W=Object(s.b)((function(e){return{rates:e.rates.rates}}))((function(e){var t=e.rates,a=e.searchValue,n=Object.keys(t).filter((function(e){return e.includes(a.toUpperCase())})).map((function(e){return r.a.createElement(M,{key:e,name:e,value:t[e].toFixed(2)})}));return r.a.createElement("ul",{className:"rates-list"},n)})),A=function(){var e=Object(n.useState)(""),t=Object(w.a)(e,2),a=t[0],c=t[1];return r.a.createElement(S,{className:"rates card--light"},r.a.createElement(T,{searchValue:a,setSearchValue:c}),r.a.createElement(W,{searchValue:a}))},F=(a(100),Object(s.b)((function(e){return{secondaryRates:e.rates.secondaryRates}}),{setSecondaryRates:function(e){return{type:"SET_SECONDARY_RATES",payload:Object(p.a)(e)}}})((function(e){var t=e.name,a=e.setIsShowList,n=e.secondaryRates,c=e.index,o=e.setSecondaryRates;return r.a.createElement("li",{className:"secondary-list__item"},r.a.createElement("button",{className:"secondary-list__button",onClick:function(){n[c]=t,o(n),a(!1)}},t))}))),L=Object(s.b)((function(e){return{rates:Object.keys(e.rates.rates).filter((function(t){return!e.rates.secondaryRates.includes(t)}))}}))((function(e){var t=e.rates,a=e.isShowList,c=e.setIsShowList,o=e.index,s=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){var a=function(a){t.current&&!t.current.contains(a.target)&&e()};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}}),[]),t}((function(){c(!1)}));if(!a)return null;var u=t.map((function(e){return r.a.createElement(F,{name:e,key:e,setIsShowList:c,index:o})}));return r.a.createElement("ul",{className:"secondary-list",ref:s},u)})),I=function(e){var t=e.rate,a=e.index,c=Object(n.useState)(!1),o=Object(w.a)(c,2),s=o[0],u=o[1];return r.a.createElement("header",{className:"card-header"},r.a.createElement("h2",{className:"secondary__header"},t),r.a.createElement("button",{className:"secondary__button",onClick:function(){return u(!s)},"aria-label":"show-rates-list"},r.a.createElement("i",{className:"fas fa-chevron-down"})),r.a.createElement(L,{rate:t,isShowList:s,setIsShowList:u,index:a}))},Y=Object(s.b)((function(e,t){return{value:e.rates.rates[t.rate]}}))((function(e){var t=e.rate,a=e.index,n=e.value;return r.a.createElement(S,{className:"secondary card--light"},r.a.createElement(I,{rate:t,index:a}),n?r.a.createElement("span",{className:"secondary__value",title:n.toFixed(2)},n.toFixed(2)):null)})),J=Object(s.b)((function(e){return{secondaryRates:e.rates.secondaryRates}}))((function(e){var t=e.secondaryRates.map((function(e,t){return r.a.createElement(Y,{rate:e,key:t,index:t})}));return r.a.createElement("div",{className:"secondaries"},t)})),V=a(65),U=(a(195),Object(s.b)((function(e){return{baseRate:e.rates.baseRate,secondaryRates:e.rates.secondaryRates}}))((function(e){var t=e.baseRate,a=e.secondaryRates,c=Object(n.useState)({labels:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],datasets:[{label:"".concat(t," / ").concat(a[0]),fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[]},{label:"".concat(t," / ").concat(a[1]),fill:!1,lineTension:.1,backgroundColor:"rgba(192,75,192,0.4)",borderColor:"rgba(192,75,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(192,75,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(192,75,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[]},{label:"".concat(t," / ").concat(a[2]),fill:!1,lineTension:.1,backgroundColor:"rgba(22, 94, 226,0.4)",borderColor:"rgba(22, 94, 226,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(22, 94, 226,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(22, 94, 226,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[]},{label:"".concat(t," / ").concat(a[3]),fill:!1,lineTension:.1,backgroundColor:"rgba(250, 84, 23,0.4)",borderColor:"rgba(250, 84, 23,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(250, 84, 23,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(250, 84, 23,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[]}]}),o=Object(w.a)(c,2),s=o[0],u=o[1];return Object(n.useEffect)((function(){(function(){var e=Object(g.a)(E.a.mark((function e(){var n,r,c,o,i,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,a);case 2:n=e.sent,r=Object.assign(Object(b.a)(Object(b.a)({},s.datasets[0]),{},{label:"".concat(t," / ").concat(a[0]),data:n[0]})),c=Object.assign(Object(b.a)(Object(b.a)({},s.datasets[1]),{},{label:"".concat(t," / ").concat(a[1]),data:n[1]})),o=Object.assign(Object(b.a)(Object(b.a)({},s.datasets[2]),{},{label:"".concat(t," / ").concat(a[2]),data:n[2]})),i=Object.assign(Object(b.a)(Object(b.a)({},s.datasets[3]),{},{label:"".concat(t," / ").concat(a[3]),data:n[3]})),l=[r,c,o,i],u(Object.assign(Object(b.a)(Object(b.a)({},s),{},{datasets:l})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,a]),r.a.createElement(S,{className:"chart card--light"},r.a.createElement(V.Line,{data:s,width:100,height:100,options:{maintainAspectRatio:!1}}))}))),q=Object(s.b)((function(e){return{baseRate:e.rates.baseRate}}),{fetchRates:function(){return function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("https://api.exchangerate.host/latest?base=".concat(a().rates.baseRate));case 2:n=e.sent,r=n.data.rates,t({type:"FETCH_RATES",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}})((function(e){var t=e.fetchRates,a=e.baseRate;return Object(n.useEffect)((function(){t()}),[a]),r.a.createElement("main",{className:"page-main"},r.a.createElement(k,null),r.a.createElement(D,null),r.a.createElement(A,null),r.a.createElement(J,null),r.a.createElement(U,null))})),P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(q,null))};o.a.render(r.a.createElement(s.a,{store:m},r.a.createElement(P,null)),document.querySelector("#root"))},67:function(e,t,a){e.exports=a(196)},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.795583e6.chunk.js.map